<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getting Started - UV PythonåŒ…ç®¡ç†å™¨æ•™ç¨‹</title>
    <meta name="description" content="">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">ğŸš€ UV Tutorial</a>
                <nav>
                    <ul>
                        <li><a href="/">é¦–é¡µ</a></li>
                        <li><a href="/tutorials/uv/getting-started.html">UVæ•™ç¨‹</a></li>
                        <li><a href="https://github.com/astral-sh/uv" target="_blank">GitHub</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            
<article>
    <div class="article-header">
        <div class="article-meta">
            <div class="meta-item">ğŸ“… <time datetime="2025-11-22">2025-11-22</time></div>
            <div class="meta-item">âœï¸ Devliang24</div>
            <div class="meta-item">ğŸ“ æ•™ç¨‹</div>
            <div class="meta-item">â±ï¸ 16 åˆ†é’Ÿé˜…è¯»</div>
        </div>
        <h1 class="article-title">Getting Started</h1>
        
    </div>

    <div class="article-content">
        <h1 id="docker">Docker å¿«é€Ÿå…¥é—¨æ•™ç¨‹ï¼šå®¹å™¨åŒ–æŠ€æœ¯å®Œå…¨æŒ‡å—</h1>
<blockquote>
<p><strong>é€‚åˆäººç¾¤</strong>ï¼šå¼€å‘è€…ã€è¿ç»´äººå‘˜ã€å¸Œæœ›å­¦ä¹ å®¹å™¨åŒ–æŠ€æœ¯çš„åˆå­¦è€…
<strong>å‰ç½®çŸ¥è¯†</strong>ï¼šåŸºç¡€çš„ Linux å‘½ä»¤ã€äº†è§£åŸºæœ¬çš„è½¯ä»¶å¼€å‘æ¦‚å¿µ
<strong>é¢„è®¡æ—¶é—´</strong>ï¼š30-40 åˆ†é’Ÿå®ŒæˆåŸºç¡€å­¦ä¹ 
<strong>ç³»ç»Ÿç¯å¢ƒ</strong>ï¼šåŸºäº Docker 28.3.3 + Ubuntu 22.04 LTS</p>
</blockquote>
<h2 id="docker_1">ğŸš€ ä»€ä¹ˆæ˜¯ Dockerï¼Ÿ</h2>
<p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨åŒ–å¹³å°ï¼Œå®ƒå…è®¸å¼€å‘è€…å°†åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–æ‰“åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå¯ä»¥åœ¨ä»»ä½•æ”¯æŒ Docker çš„ç¯å¢ƒä¸­è¿è¡Œã€‚</p>
<h3 id="docker_2">ğŸ’¡ Docker çš„æ ¸å¿ƒä»·å€¼</h3>
<ul>
<li><strong>ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œ</strong>ï¼šæ¶ˆé™¤"åœ¨æˆ‘æœºå™¨ä¸Šå¯ä»¥è¿è¡Œ"çš„é—®é¢˜</li>
<li><strong>è½»é‡çº§</strong>ï¼šå®¹å™¨æ¯”è™šæ‹Ÿæœºæ›´å°ã€å¯åŠ¨æ›´å¿«</li>
<li><strong>ç¯å¢ƒä¸€è‡´æ€§</strong>ï¼šå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒå®Œå…¨ä¸€è‡´</li>
<li><strong>èµ„æºé«˜æ•ˆ</strong>ï¼šå…±äº«æ“ä½œç³»ç»Ÿå†…æ ¸ï¼ŒèŠ‚çœç³»ç»Ÿèµ„æº</li>
<li><strong>å¾®æœåŠ¡å‹å¥½</strong>ï¼šéå¸¸é€‚åˆæ„å»ºå’Œéƒ¨ç½²å¾®æœåŠ¡æ¶æ„</li>
</ul>
<h3 id="docker-vs">ğŸ“Š Docker vs ä¼ ç»Ÿè™šæ‹Ÿæœº</h3>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>Docker å®¹å™¨</th>
<th>ä¼ ç»Ÿè™šæ‹Ÿæœº</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å¯åŠ¨é€Ÿåº¦</strong></td>
<td>ğŸš€ ç§’çº§</td>
<td>ğŸ¢ åˆ†é’Ÿçº§</td>
</tr>
<tr>
<td><strong>èµ„æºå ç”¨</strong></td>
<td>ğŸ“‰ MB çº§åˆ«</td>
<td>ğŸ“ˆ GB çº§åˆ«</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>âš¡ æ¥è¿‘åŸç”Ÿ</td>
<td>ğŸ”‹ æœ‰æ€§èƒ½æŸè€—</td>
</tr>
<tr>
<td><strong>æ“ä½œç³»ç»Ÿ</strong></td>
<td>å…±äº«å®¿ä¸»æœºå†…æ ¸</td>
<td>æ¯ä¸ª VM å®Œæ•´ OS</td>
</tr>
<tr>
<td><strong>éš”ç¦»æ€§</strong></td>
<td>è¿›ç¨‹çº§åˆ«éš”ç¦»</td>
<td>å®Œå…¨éš”ç¦»</td>
</tr>
<tr>
<td><strong>éƒ¨ç½²å¯†åº¦</strong></td>
<td>å•æœºå¯è¿è¡Œä¸Šåƒå®¹å™¨</td>
<td>å•æœºå‡ åä¸ª VM</td>
</tr>
<tr>
<td><strong>ç£ç›˜å ç”¨</strong></td>
<td>è½»é‡çº§</td>
<td>é‡é‡çº§</td>
</tr>
</tbody>
</table>
<h3 id="docker_3">ğŸ—ï¸ Docker æ¶æ„å›¾</h3>
<div class="codehilite"><pre><span></span><code><span class="nf">graph</span><span class="w"> </span><span class="n">TB</span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="n">Docker</span><span class="w"> </span><span class="err">å®¢æˆ·ç«¯</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">docker</span><span class="w"> </span><span class="err">å‘½ä»¤è¡Œå·¥å…·</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">å‘é€è¯·æ±‚</span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="n">Docker</span><span class="w"> </span><span class="err">å®ˆæŠ¤è¿›ç¨‹</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">dockerd</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="err">é•œåƒä»“åº“</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">Images</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">D</span><span class="p">[</span><span class="err">è¿è¡Œå®¹å™¨</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">Containers</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">E</span><span class="p">[</span><span class="err">ç½‘ç»œé…ç½®</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">Networks</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">F</span><span class="p">[</span><span class="err">æ•°æ®å·</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">Volumes</span><span class="p">]</span>
<span class="w">    </span><span class="n">G</span><span class="p">[</span><span class="n">Docker</span><span class="w"> </span><span class="n">Hub</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">é•œåƒä»“åº“</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="p">.</span><span class="o">-&gt;|</span><span class="err">æ‹‰å–é•œåƒ</span><span class="o">|</span><span class="w"> </span><span class="n">C</span>
<span class="w">    </span><span class="n">H</span><span class="p">[</span><span class="err">å›½å†…é•œåƒæº</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">åŠ é€ŸæœåŠ¡</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="p">.</span><span class="o">-&gt;|</span><span class="err">åŠ é€Ÿæ‹‰å–</span><span class="o">|</span><span class="w"> </span><span class="n">C</span>
</code></pre></div>

<p><strong>æ¶æ„è¯´æ˜</strong>ï¼š
- <strong>Docker å®¢æˆ·ç«¯</strong>ï¼šç”¨æˆ·é€šè¿‡ <code>docker</code> å‘½ä»¤ä¸ Docker äº¤äº’
- <strong>Docker å®ˆæŠ¤è¿›ç¨‹</strong>ï¼šåå°æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç†å®¹å™¨ã€é•œåƒç­‰
- <strong>é•œåƒ (Images)</strong>ï¼šåº”ç”¨çš„é™æ€æ¨¡æ¿
- <strong>å®¹å™¨ (Containers)</strong>ï¼šé•œåƒçš„è¿è¡Œå®ä¾‹
- <strong>Docker Hub</strong>ï¼šå®˜æ–¹é•œåƒä»“åº“ï¼Œç±»ä¼¼ GitHub</p>
<h2 id="docker_4">ğŸ› ï¸ å®‰è£… Docker</h2>
<h3 id="ubuntu-2204">Ubuntu 22.04 å®‰è£…ï¼ˆæ¨èæ–¹å¼ï¼‰</h3>
<h4 id="_1">æ–¹æ³•ä¸€ï¼šä½¿ç”¨å®˜æ–¹è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ä¸‹è½½å¹¶æ‰§è¡Œå®˜æ–¹å®‰è£…è„šæœ¬</span>
curl<span class="w"> </span>-fsSL<span class="w"> </span>https://get.docker.com<span class="w"> </span>-o<span class="w"> </span>get-docker.sh
sudo<span class="w"> </span>sh<span class="w"> </span>get-docker.sh

<span class="c1"># å¯åŠ¨ Docker æœåŠ¡</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>docker
sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</code></pre></div>

<h4 id="apt">æ–¹æ³•äºŒï¼šä½¿ç”¨ APT ä»“åº“ï¼ˆæ›´å¯æ§ï¼‰</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1. æ›´æ–°è½¯ä»¶åŒ…ç´¢å¼•</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>update

<span class="c1"># 2. å®‰è£…ä¾èµ–åŒ…</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>ca-certificates<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>curl<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>gnupg<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>lsb-release

<span class="c1"># 3. æ·»åŠ  Docker å®˜æ–¹ GPG å¯†é’¥</span>
sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/apt/keyrings
curl<span class="w"> </span>-fsSL<span class="w"> </span>https://download.docker.com/linux/ubuntu/gpg<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>sudo<span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span>-o<span class="w"> </span>/etc/apt/keyrings/docker.gpg

<span class="c1"># 4. è®¾ç½®ç¨³å®šç‰ˆä»“åº“</span>
<span class="nb">echo</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">&quot;deb [arch=</span><span class="k">$(</span>dpkg<span class="w"> </span>--print-architecture<span class="k">)</span><span class="s2"> signed-by=/etc/apt/keyrings/docker.gpg] \</span>
<span class="s2">  https://download.docker.com/linux/ubuntu \</span>
<span class="s2">  </span><span class="k">$(</span>lsb_release<span class="w"> </span>-cs<span class="k">)</span><span class="s2"> stable&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/docker.list<span class="w"> </span>&gt;<span class="w"> </span>/dev/null

<span class="c1"># 5. å®‰è£… Docker Engine</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>docker-ce<span class="w"> </span>docker-ce-cli<span class="w"> </span>containerd.io<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>docker-buildx-plugin<span class="w"> </span>docker-compose-plugin

<span class="c1"># 6. å¯åŠ¨ Docker æœåŠ¡</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>docker
sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</code></pre></div>

<h3 id="linux">å…¶ä»– Linux å‘è¡Œç‰ˆ</h3>
<h4 id="centos-rhel">CentOS / RHEL</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># å®‰è£…ä¾èµ–</span>
sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>yum-utils

<span class="c1"># æ·»åŠ  Docker ä»“åº“</span>
sudo<span class="w"> </span>yum-config-manager<span class="w"> </span>--add-repo<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>https://download.docker.com/linux/centos/docker-ce.repo

<span class="c1"># å®‰è£… Docker</span>
sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>docker-ce<span class="w"> </span>docker-ce-cli<span class="w"> </span>containerd.io

<span class="c1"># å¯åŠ¨æœåŠ¡</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>docker
sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</code></pre></div>

<h3 id="macos">macOS å®‰è£…</h3>
<ol>
<li>ä¸‹è½½ <a href="https://www.docker.com/products/docker-desktop">Docker Desktop for Mac</a></li>
<li>åŒå‡» <code>.dmg</code> æ–‡ä»¶å®‰è£…</li>
<li>å¯åŠ¨ Docker Desktop åº”ç”¨</li>
<li>ç­‰å¾…çŠ¶æ€æ å›¾æ ‡æ˜¾ç¤º Docker æ­£åœ¨è¿è¡Œ</li>
</ol>
<h3 id="windows">Windows å®‰è£…</h3>
<ol>
<li>ç¡®ä¿å¯ç”¨ WSL 2ï¼ˆWindows 10/11ï¼‰</li>
<li>ä¸‹è½½ <a href="https://www.docker.com/products/docker-desktop">Docker Desktop for Windows</a></li>
<li>è¿è¡Œå®‰è£…ç¨‹åº</li>
<li>é‡å¯è®¡ç®—æœº</li>
<li>å¯åŠ¨ Docker Desktop</li>
</ol>
<h3 id="_2">éªŒè¯å®‰è£…</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># æŸ¥çœ‹ Docker ç‰ˆæœ¬</span>
docker<span class="w"> </span>--version
<span class="c1"># è¾“å‡ºç¤ºä¾‹ï¼šDocker version 28.3.3, build 980b856</span>

<span class="c1"># æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</span>
docker<span class="w"> </span>info

<span class="c1"># è¿è¡Œæµ‹è¯•å®¹å™¨</span>
docker<span class="w"> </span>run<span class="w"> </span>hello-world
</code></pre></div>

<h3 id="root-docker">é…ç½®é root ç”¨æˆ·ä½¿ç”¨ Dockerï¼ˆé‡è¦ï¼‰</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker ç»„</span>
sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>docker<span class="w"> </span><span class="nv">$USER</span>

<span class="c1"># é‡æ–°ç™»å½•æˆ–æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ç»„æƒé™ç”Ÿæ•ˆ</span>
newgrp<span class="w"> </span>docker

<span class="c1"># æµ‹è¯•æ˜¯å¦å¯ä»¥æ—  sudo è¿è¡Œ</span>
docker<span class="w"> </span>run<span class="w"> </span>hello-world
</code></pre></div>

<h2 id="_3">ğŸŒ é…ç½®å›½å†…é•œåƒæºï¼ˆé‡ç‚¹ç« èŠ‚ï¼‰</h2>
<h3 id="_4">âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦é…ç½®é•œåƒæºï¼Ÿ</h3>
<p>Docker å®˜æ–¹é•œåƒä»“åº“ Docker Hub ä½äºå›½å¤–ï¼Œå›½å†…è®¿é—®é€Ÿåº¦æ…¢ç”šè‡³æ— æ³•è®¿é—®ã€‚é…ç½®å›½å†…é•œåƒæºå¯ä»¥ï¼š
- âœ… å¤§å¹…æå‡é•œåƒæ‹‰å–é€Ÿåº¦ï¼ˆä»å‡ å°æ—¶åˆ°å‡ åˆ†é’Ÿï¼‰
- âœ… é¿å…ç½‘ç»œè¶…æ—¶å’Œè¿æ¥å¤±è´¥
- âœ… èŠ‚çœå¸¦å®½å’Œæ—¶é—´æˆæœ¬</p>
<h3 id="_5">ğŸš€ é…ç½®æ­¥éª¤ï¼ˆåŸºäºç³»ç»Ÿå®é™…é…ç½®ï¼‰</h3>
<h4 id="1-docker">1. åˆ›å»ºæˆ–ç¼–è¾‘ Docker é…ç½®æ–‡ä»¶</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># åˆ›å»ºé…ç½®ç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
sudo<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/etc/docker

<span class="c1"># ç¼–è¾‘é…ç½®æ–‡ä»¶</span>
sudo<span class="w"> </span>vim<span class="w"> </span>/etc/docker/daemon.json
</code></pre></div>

<h4 id="2">2. æ·»åŠ é•œåƒæºé…ç½®</h4>
<p>å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° <code>/etc/docker/daemon.json</code>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;registry-mirrors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;http://hub-mirror.c.163.com&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;https://docker.m.daocloud.io&quot;</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>æ¨èçš„å›½å†…é•œåƒæºåˆ—è¡¨</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>é•œåƒæº</th>
<th>åœ°å€</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç½‘æ˜“</strong></td>
<td><code>http://hub-mirror.c.163.com</code></td>
<td>ç¨³å®šå¯é  â­</td>
</tr>
<tr>
<td><strong>DaoCloud</strong></td>
<td><code>https://docker.m.daocloud.io</code></td>
<td>é€Ÿåº¦å¿« â­</td>
</tr>
<tr>
<td><strong>é˜¿é‡Œäº‘</strong></td>
<td><code>https://[ä½ çš„ID].mirror.aliyuncs.com</code></td>
<td>éœ€è¦æ³¨å†Œè·å–</td>
</tr>
<tr>
<td><strong>è…¾è®¯äº‘</strong></td>
<td><code>https://mirror.ccs.tencentyun.com</code></td>
<td>è…¾è®¯ç”¨æˆ·æ¨è</td>
</tr>
<tr>
<td><strong>åä¸ºäº‘</strong></td>
<td><code>https://05f073ad3c0010ea0f4bc00b7105ec20.mirror.swr.myhuaweicloud.com</code></td>
<td>åä¸ºç”¨æˆ·æ¨è</td>
</tr>
<tr>
<td><strong>ä¸­ç§‘å¤§</strong></td>
<td><code>https://docker.mirrors.ustc.edu.cn</code></td>
<td>æ•™è‚²ç½‘å‹å¥½</td>
</tr>
</tbody>
</table>
<p>ğŸ’¡ <strong>å°è´´å£«</strong>ï¼šå¯ä»¥åŒæ—¶é…ç½®å¤šä¸ªé•œåƒæºï¼ŒDocker ä¼šæŒ‰é¡ºåºå°è¯•ã€‚</p>
<h4 id="3-docker">3. é‡å¯ Docker æœåŠ¡</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># é‡æ–°åŠ è½½é…ç½®</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload

<span class="c1"># é‡å¯ Docker æœåŠ¡</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker
</code></pre></div>

<h4 id="4">4. éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆ</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># æŸ¥çœ‹é•œåƒæºé…ç½®</span>
docker<span class="w"> </span>info<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-A<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="s2">&quot;Registry Mirrors&quot;</span>

<span class="c1"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="c1"># Registry Mirrors:</span>
<span class="c1">#  http://hub-mirror.c.163.com/</span>
<span class="c1">#  https://docker.m.daocloud.io/</span>
</code></pre></div>

<h3 id="_6">ğŸ“Š é•œåƒæ‹‰å–æµç¨‹å›¾</h3>
<div class="codehilite"><pre><span></span><code><span class="n">flowchart</span><span class="w"> </span><span class="n">LR</span>
<span class="w">    </span><span class="n">A</span><span class="o">[</span><span class="n">docker pull å‘½ä»¤</span><span class="o">]</span><span class="w"> </span><span class="c1">--&gt; B{æ£€æŸ¥æœ¬åœ°ç¼“å­˜}</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="c1">--&gt;|é•œåƒå·²å­˜åœ¨| C[ç›´æ¥ä½¿ç”¨æœ¬åœ°é•œåƒ]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="c1">--&gt;|é•œåƒä¸å­˜åœ¨| D[è®¿é—®é•œåƒä»“åº“]</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="c1">--&gt; E{é…ç½®äº†é•œåƒæº?}</span>
<span class="w">    </span><span class="n">E</span><span class="w"> </span><span class="c1">--&gt;|æ˜¯| F[ä¼˜å…ˆè®¿é—®å›½å†…é•œåƒæº]</span>
<span class="w">    </span><span class="n">E</span><span class="w"> </span><span class="c1">--&gt;|å¦| G[è®¿é—® Docker Hub]</span>
<span class="w">    </span><span class="n">F</span><span class="w"> </span><span class="c1">--&gt; H[ç½‘æ˜“é•œåƒ]</span>
<span class="w">    </span><span class="n">F</span><span class="w"> </span><span class="c1">--&gt; I[DaoCloudé•œåƒ]</span>
<span class="w">    </span><span class="n">H</span><span class="w"> </span><span class="c1">--&gt; J{ä¸‹è½½æˆåŠŸ?}</span>
<span class="w">    </span><span class="n">I</span><span class="w"> </span><span class="c1">--&gt; J</span>
<span class="w">    </span><span class="n">J</span><span class="w"> </span><span class="c1">--&gt;|æˆåŠŸ| K[ä¿å­˜åˆ°æœ¬åœ°]</span>
<span class="w">    </span><span class="n">J</span><span class="w"> </span><span class="c1">--&gt;|å¤±è´¥| G</span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="c1">--&gt; L[ä»å®˜æ–¹æºä¸‹è½½]</span>
<span class="w">    </span><span class="n">L</span><span class="w"> </span><span class="c1">--&gt; K</span>
<span class="w">    </span><span class="n">K</span><span class="w"> </span><span class="c1">--&gt; M[é•œåƒå¯ç”¨]</span>
</code></pre></div>

<h3 id="_7">ğŸ§ª æµ‹è¯•é•œåƒæ‹‰å–é€Ÿåº¦</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># æ‹‰å–ä¸€ä¸ªè¾ƒå¤§çš„é•œåƒæµ‹è¯•é€Ÿåº¦</span>
<span class="nb">time</span><span class="w"> </span>docker<span class="w"> </span>pull<span class="w"> </span>python:3.10

<span class="c1"># å¯¹æ¯”é…ç½®å‰åçš„é€Ÿåº¦å·®å¼‚</span>
</code></pre></div>

<h2 id="_8">ğŸ“š æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</h2>
<h3 id="41-image">4.1 é•œåƒ (Image)</h3>
<h4 id="_9">ä»€ä¹ˆæ˜¯é•œåƒï¼Ÿ</h4>
<p>é•œåƒæ˜¯ä¸€ä¸ª<strong>åªè¯»çš„æ¨¡æ¿</strong>ï¼ŒåŒ…å«è¿è¡Œåº”ç”¨æ‰€éœ€çš„ä¸€åˆ‡ï¼š
- ä»£ç å’Œç¨‹åº
- è¿è¡Œæ—¶ç¯å¢ƒï¼ˆPythonã€Node.js ç­‰ï¼‰
- ç³»ç»Ÿå·¥å…·å’Œåº“
- é…ç½®æ–‡ä»¶</p>
<p>å¯ä»¥æŠŠé•œåƒç†è§£ä¸ºï¼š
- <strong>ç±»</strong>ï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰â†’ é•œåƒ
- <strong>å®‰è£…åŒ…</strong>ï¼ˆè½¯ä»¶å®‰è£…ï¼‰â†’ é•œåƒ
- <strong>æ¨¡å…·</strong>ï¼ˆåˆ¶é€ ä¸šï¼‰â†’ é•œåƒ</p>
<h4 id="_10">é•œåƒåˆ†å±‚ç»“æ„</h4>
<p>Docker é•œåƒé‡‡ç”¨<strong>åˆ†å±‚å­˜å‚¨</strong>æ¶æ„ï¼Œæ¯ä¸€å±‚åªè®°å½•ä¸ä¸Šä¸€å±‚çš„å·®å¼‚ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="n">flowchart</span><span class="w"> </span><span class="n">TB</span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="err">åŸºç¡€é•œåƒå±‚</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">ubuntu</span><span class="o">:</span><span class="mf">22.04</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="err">ç³»ç»Ÿå·¥å…·å±‚</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">å®‰è£…</span><span class="w"> </span><span class="n">curl</span><span class="err">ã€</span><span class="n">git</span><span class="w"> </span><span class="err">ç­‰</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="err">è¿è¡Œæ—¶å±‚</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">å®‰è£…</span><span class="w"> </span><span class="n">Python</span><span class="w"> </span><span class="mf">3.10</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">D</span><span class="p">[</span><span class="err">ä¾èµ–å±‚</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">pip</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="err">ä¾èµ–åŒ…</span><span class="p">]</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">E</span><span class="p">[</span><span class="err">åº”ç”¨å±‚</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">å¤åˆ¶åº”ç”¨ä»£ç </span><span class="p">]</span>
<span class="w">    </span><span class="n">E</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">F</span><span class="p">[</span><span class="err">é…ç½®å±‚</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">è®¾ç½®ç¯å¢ƒå˜é‡ã€å¯åŠ¨å‘½ä»¤</span><span class="p">]</span>

<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="n">e1f5ff</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="n">b3e5fc</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">81</span><span class="n">d4fa</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mf">4f</span><span class="n">c3f7</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">29</span><span class="n">b6f6</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mo">03</span><span class="mi">9</span><span class="n">be5</span>
</code></pre></div>

<p><strong>åˆ†å±‚çš„å¥½å¤„</strong>ï¼š
- âœ… <strong>èŠ‚çœå­˜å‚¨ç©ºé—´</strong>ï¼šç›¸åŒçš„å±‚å¯ä»¥è¢«å¤šä¸ªé•œåƒå…±äº«
- âœ… <strong>åŠ é€Ÿæ„å»º</strong>ï¼šæœªä¿®æ”¹çš„å±‚å¯ä»¥ä½¿ç”¨ç¼“å­˜
- âœ… <strong>å¿«é€Ÿéƒ¨ç½²</strong>ï¼šåªéœ€ä¸‹è½½ä¿®æ”¹çš„å±‚</p>
<h4 id="_11">å¸¸ç”¨é•œåƒå‘½ä»¤</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># æœç´¢é•œåƒ</span>
docker<span class="w"> </span>search<span class="w"> </span>nginx

<span class="c1"># æ‹‰å–é•œåƒ</span>
docker<span class="w"> </span>pull<span class="w"> </span>nginx:latest

<span class="c1"># æŸ¥çœ‹æœ¬åœ°é•œåƒ</span>
docker<span class="w"> </span>images

<span class="c1"># æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯</span>
docker<span class="w"> </span>inspect<span class="w"> </span>nginx:latest

<span class="c1"># åˆ é™¤é•œåƒ</span>
docker<span class="w"> </span>rmi<span class="w"> </span>nginx:latest

<span class="c1"># æ„å»ºé•œåƒ</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>myapp:v1.0<span class="w"> </span>.

<span class="c1"># ç»™é•œåƒæ‰“æ ‡ç­¾</span>
docker<span class="w"> </span>tag<span class="w"> </span>myapp:v1.0<span class="w"> </span>myapp:latest

<span class="c1"># å¯¼å‡ºé•œåƒ</span>
docker<span class="w"> </span>save<span class="w"> </span>-o<span class="w"> </span>nginx.tar<span class="w"> </span>nginx:latest

<span class="c1"># å¯¼å…¥é•œåƒ</span>
docker<span class="w"> </span>load<span class="w"> </span>-i<span class="w"> </span>nginx.tar
</code></pre></div>

<h3 id="42-container">4.2 å®¹å™¨ (Container)</h3>
<h4 id="_12">ä»€ä¹ˆæ˜¯å®¹å™¨ï¼Ÿ</h4>
<p>å®¹å™¨æ˜¯é•œåƒçš„<strong>è¿è¡Œå®ä¾‹</strong>ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„åº”ç”¨è¿›ç¨‹ã€‚</p>
<p><strong>é•œåƒ vs å®¹å™¨</strong>ï¼š
- <strong>é•œåƒ</strong>ï¼šé™æ€çš„æ–‡ä»¶é›†åˆï¼ˆç±»æ¯”ï¼šç¨‹åºæ–‡ä»¶ï¼‰
- <strong>å®¹å™¨</strong>ï¼šåŠ¨æ€çš„è¿è¡Œç¯å¢ƒï¼ˆç±»æ¯”ï¼šæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼‰</p>
<div class="codehilite"><pre><span></span><code><span class="n">flowchart</span><span class="w"> </span><span class="n">LR</span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="n">Docker</span><span class="w"> </span><span class="err">é•œåƒ</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">nginx</span><span class="o">:</span><span class="n">latest</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;|</span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="o">|</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="err">å®¹å™¨å®ä¾‹</span><span class="w"> </span><span class="mi">1</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">web</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="w">    </span><span class="n">A</span><span class="w"> </span><span class="o">--&gt;|</span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="o">|</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="err">å®¹å™¨å®ä¾‹</span><span class="w"> </span><span class="mi">2</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">web</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="w">    </span><span class="n">A</span><span class="w"> </span><span class="o">--&gt;|</span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="o">|</span><span class="w"> </span><span class="n">D</span><span class="p">[</span><span class="err">å®¹å™¨å®ä¾‹</span><span class="w"> </span><span class="mi">3</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">web</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>

<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">4</span><span class="n">caf50</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mf">2196f</span><span class="mi">3</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mf">2196f</span><span class="mi">3</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mf">2196f</span><span class="mi">3</span>
</code></pre></div>

<h4 id="_13">å®¹å™¨ç”Ÿå‘½å‘¨æœŸ</h4>
<div class="codehilite"><pre><span></span><code><span class="n">stateDiagram</span><span class="o">-</span><span class="n">v2</span>
<span class="w">    </span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">å·²åˆ›å»º</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">create</span>
<span class="w">    </span><span class="err">å·²åˆ›å»º</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">è¿è¡Œä¸­</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">start</span>
<span class="w">    </span><span class="err">è¿è¡Œä¸­</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">æš‚åœ</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">pause</span>
<span class="w">    </span><span class="err">æš‚åœ</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">è¿è¡Œä¸­</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">unpause</span>
<span class="w">    </span><span class="err">è¿è¡Œä¸­</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">å·²åœæ­¢</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">stop</span>
<span class="w">    </span><span class="err">å·²åœæ­¢</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">è¿è¡Œä¸­</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">restart</span>
<span class="w">    </span><span class="err">è¿è¡Œä¸­</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="err">å·²åœæ­¢</span><span class="o">:</span><span class="w"> </span><span class="err">å®¹å™¨å†…è¿›ç¨‹é€€å‡º</span>
<span class="w">    </span><span class="err">å·²åœæ­¢</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">rm</span>
<span class="w">    </span><span class="err">è¿è¡Œä¸­</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="p">(</span><span class="err">å¼ºåˆ¶åˆ é™¤</span><span class="p">)</span>
</code></pre></div>

<h4 id="_14">å¸¸ç”¨å®¹å™¨å‘½ä»¤</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># è¿è¡Œå®¹å™¨ï¼ˆåˆ›å»ºå¹¶å¯åŠ¨ï¼‰</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>mynginx<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:80<span class="w"> </span>nginx

<span class="c1"># æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span>
docker<span class="w"> </span>ps

<span class="c1"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰</span>
docker<span class="w"> </span>ps<span class="w"> </span>-a

<span class="c1"># å¯åŠ¨å®¹å™¨</span>
docker<span class="w"> </span>start<span class="w"> </span>mynginx

<span class="c1"># åœæ­¢å®¹å™¨</span>
docker<span class="w"> </span>stop<span class="w"> </span>mynginx

<span class="c1"># é‡å¯å®¹å™¨</span>
docker<span class="w"> </span>restart<span class="w"> </span>mynginx

<span class="c1"># æš‚åœå®¹å™¨</span>
docker<span class="w"> </span>pause<span class="w"> </span>mynginx

<span class="c1"># æ¢å¤å®¹å™¨</span>
docker<span class="w"> </span>unpause<span class="w"> </span>mynginx

<span class="c1"># åˆ é™¤å®¹å™¨</span>
docker<span class="w"> </span>rm<span class="w"> </span>mynginx

<span class="c1"># å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨</span>
docker<span class="w"> </span>rm<span class="w"> </span>-f<span class="w"> </span>mynginx

<span class="c1"># è¿›å…¥å®¹å™¨å†…éƒ¨</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>mynginx<span class="w"> </span>bash

<span class="c1"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>mynginx

<span class="c1"># æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ</span>
docker<span class="w"> </span>stats<span class="w"> </span>mynginx

<span class="c1"># æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span>
docker<span class="w"> </span>inspect<span class="w"> </span>mynginx
</code></pre></div>

<h3 id="43-dockerfile">4.3 Dockerfile</h3>
<h4 id="dockerfile">ä»€ä¹ˆæ˜¯ Dockerfileï¼Ÿ</h4>
<p>Dockerfile æ˜¯ä¸€ä¸ª<strong>æ–‡æœ¬æ–‡ä»¶</strong>ï¼ŒåŒ…å«æ„å»º Docker é•œåƒçš„æ‰€æœ‰æŒ‡ä»¤ã€‚é€šè¿‡ Dockerfileï¼Œå¯ä»¥è‡ªåŠ¨åŒ–ã€å¯é‡å¤åœ°æ„å»ºé•œåƒã€‚</p>
<h4 id="dockerfile_1">Dockerfile æ„å»ºæµç¨‹</h4>
<div class="codehilite"><pre><span></span><code><span class="n">flowchart</span><span class="w"> </span><span class="n">TD</span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="err">ç¼–å†™</span><span class="w"> </span><span class="n">Dockerfile</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="err">æ‰§è¡Œ</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="kr">build</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="err">è¯»å–</span><span class="w"> </span><span class="n">FROM</span><span class="w"> </span><span class="err">æŒ‡ä»¤</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">æ‹‰å–åŸºç¡€é•œåƒ</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">D</span><span class="p">[</span><span class="err">æ‰§è¡Œ</span><span class="w"> </span><span class="n">RUN</span><span class="w"> </span><span class="err">æŒ‡ä»¤</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">å®‰è£…ä¾èµ–å’Œå·¥å…·</span><span class="p">]</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">E</span><span class="p">[</span><span class="err">æ‰§è¡Œ</span><span class="w"> </span><span class="n">COPY</span><span class="o">/</span><span class="n">ADD</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">å¤åˆ¶åº”ç”¨æ–‡ä»¶</span><span class="p">]</span>
<span class="w">    </span><span class="n">E</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">F</span><span class="p">[</span><span class="err">æ‰§è¡Œ</span><span class="w"> </span><span class="n">ENV</span><span class="o">/</span><span class="n">WORKDIR</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">è®¾ç½®ç¯å¢ƒå˜é‡å’Œå·¥ä½œç›®å½•</span><span class="p">]</span>
<span class="w">    </span><span class="n">F</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">G</span><span class="p">[</span><span class="err">æ‰§è¡Œ</span><span class="w"> </span><span class="n">EXPOSE</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">å£°æ˜ç«¯å£</span><span class="p">]</span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">H</span><span class="p">[</span><span class="err">æ‰§è¡Œ</span><span class="w"> </span><span class="n">CMD</span><span class="o">/</span><span class="n">ENTRYPOINT</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">è®¾ç½®å¯åŠ¨å‘½ä»¤</span><span class="p">]</span>
<span class="w">    </span><span class="n">H</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="err">ç”Ÿæˆæ–°é•œåƒ</span><span class="p">]</span>
<span class="w">    </span><span class="n">I</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">J</span><span class="p">[</span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨</span><span class="p">]</span>

<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="n">fff3e0</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">4</span><span class="n">caf50</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">J</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mf">2196f</span><span class="mi">3</span>
</code></pre></div>

<h4 id="dockerfile_2">Dockerfile å¸¸ç”¨æŒ‡ä»¤</h4>
<table>
<thead>
<tr>
<th>æŒ‡ä»¤</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FROM</code></td>
<td>æŒ‡å®šåŸºç¡€é•œåƒ</td>
<td><code>FROM python:3.10-slim</code></td>
</tr>
<tr>
<td><code>WORKDIR</code></td>
<td>è®¾ç½®å·¥ä½œç›®å½•</td>
<td><code>WORKDIR /app</code></td>
</tr>
<tr>
<td><code>COPY</code></td>
<td>å¤åˆ¶æ–‡ä»¶åˆ°é•œåƒ</td>
<td><code>COPY . /app</code></td>
</tr>
<tr>
<td><code>ADD</code></td>
<td>å¤åˆ¶æ–‡ä»¶ï¼ˆæ”¯æŒ URL å’Œè‡ªåŠ¨è§£å‹ï¼‰</td>
<td><code>ADD app.tar.gz /app</code></td>
</tr>
<tr>
<td><code>RUN</code></td>
<td>æ‰§è¡Œå‘½ä»¤ï¼ˆæ„å»ºæ—¶ï¼‰</td>
<td><code>RUN pip install -r requirements.txt</code></td>
</tr>
<tr>
<td><code>CMD</code></td>
<td>å®¹å™¨å¯åŠ¨å‘½ä»¤ï¼ˆå¯è¢«è¦†ç›–ï¼‰</td>
<td><code>CMD ["python", "app.py"]</code></td>
</tr>
<tr>
<td><code>ENTRYPOINT</code></td>
<td>å®¹å™¨å¯åŠ¨å…¥å£ï¼ˆä¸å¯è¦†ç›–ï¼‰</td>
<td><code>ENTRYPOINT ["python"]</code></td>
</tr>
<tr>
<td><code>ENV</code></td>
<td>è®¾ç½®ç¯å¢ƒå˜é‡</td>
<td><code>ENV PORT=8000</code></td>
</tr>
<tr>
<td><code>EXPOSE</code></td>
<td>å£°æ˜ç«¯å£</td>
<td><code>EXPOSE 8000</code></td>
</tr>
<tr>
<td><code>VOLUME</code></td>
<td>å®šä¹‰æ•°æ®å·æŒ‚è½½ç‚¹</td>
<td><code>VOLUME /data</code></td>
</tr>
<tr>
<td><code>USER</code></td>
<td>æŒ‡å®šè¿è¡Œç”¨æˆ·</td>
<td><code>USER nobody</code></td>
</tr>
<tr>
<td><code>ARG</code></td>
<td>æ„å»ºå‚æ•°</td>
<td><code>ARG VERSION=1.0</code></td>
</tr>
</tbody>
</table>
<h4 id="dockerfile_3">Dockerfile ç¤ºä¾‹</h4>
<div class="codehilite"><pre><span></span><code><span class="c"># ä½¿ç”¨å®˜æ–¹ Python è¿è¡Œæ—¶ä½œä¸ºåŸºç¡€é•œåƒ</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.10-slim</span>

<span class="c"># è®¾ç½®å·¥ä½œç›®å½•</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>

<span class="c"># å¤åˆ¶ä¾èµ–æ–‡ä»¶</span>
<span class="k">COPY</span><span class="w"> </span>requirements.txt<span class="w"> </span>.

<span class="c"># å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨å›½å†…æºåŠ é€Ÿï¼‰</span>
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>-r<span class="w"> </span>requirements.txt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-i<span class="w"> </span>https://pypi.tuna.tsinghua.edu.cn/simple/

<span class="c"># å¤åˆ¶åº”ç”¨ä»£ç </span>
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>.

<span class="c"># è®¾ç½®ç¯å¢ƒå˜é‡</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">PYTHONUNBUFFERED</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">PORT</span><span class="o">=</span><span class="m">8000</span>

<span class="c"># æš´éœ²ç«¯å£</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">8000</span>

<span class="c"># åˆ›å»ºé root ç”¨æˆ·</span>
<span class="k">RUN</span><span class="w"> </span>useradd<span class="w"> </span>-m<span class="w"> </span>-u<span class="w"> </span><span class="m">1000</span><span class="w"> </span>appuser<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>chown<span class="w"> </span>-R<span class="w"> </span>appuser:appuser<span class="w"> </span>/app

<span class="c"># åˆ‡æ¢åˆ°é root ç”¨æˆ·</span>
<span class="k">USER</span><span class="w"> </span><span class="s">appuser</span>

<span class="c"># å¯åŠ¨å‘½ä»¤</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app.py&quot;</span><span class="p">]</span>
</code></pre></div>

<h3 id="44-docker-compose">4.4 Docker Compose</h3>
<h4 id="docker-compose">ä»€ä¹ˆæ˜¯ Docker Composeï¼Ÿ</h4>
<p>Docker Compose æ˜¯ä¸€ä¸ª<strong>å¤šå®¹å™¨ç¼–æ’å·¥å…·</strong>ï¼Œç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ã€‚é€šè¿‡ä¸€ä¸ª YAML æ–‡ä»¶é…ç½®æ‰€æœ‰æœåŠ¡ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
- Web åº”ç”¨ + æ•°æ®åº“
- å¾®æœåŠ¡æ¶æ„
- å¼€å‘ç¯å¢ƒå¿«é€Ÿæ­å»º
- CI/CD æµ‹è¯•ç¯å¢ƒ</p>
<h4 id="_15">å¤šå®¹å™¨åº”ç”¨æ¶æ„</h4>
<div class="codehilite"><pre><span></span><code><span class="nf">graph</span><span class="w"> </span><span class="n">TB</span>
<span class="w">    </span><span class="n">subgraph</span><span class="w"> </span><span class="s">&quot;Docker Compose åº”ç”¨&quot;</span>
<span class="w">        </span><span class="n">A</span><span class="p">[</span><span class="n">Nginx</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="err">åå‘ä»£ç†</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;:</span><span class="mi">80</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="n">FastAPI</span><span class="w"> </span><span class="err">åç«¯</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;:</span><span class="mi">8000</span><span class="p">]</span>
<span class="w">        </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="n">MySQL</span><span class="w"> </span><span class="err">æ•°æ®åº“</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;:</span><span class="mi">3306</span><span class="p">]</span>
<span class="w">        </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">D</span><span class="p">[</span><span class="n">Redis</span><span class="w"> </span><span class="err">ç¼“å­˜</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;:</span><span class="mi">6379</span><span class="p">]</span>
<span class="w">        </span><span class="n">E</span><span class="p">[</span><span class="err">å‰ç«¯é™æ€æ–‡ä»¶</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">Vue</span><span class="p">.</span><span class="n">js</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="p">.</span><span class="o">-&gt;</span><span class="w"> </span><span class="n">A</span>
<span class="w">    </span><span class="kd">end</span>

<span class="w">    </span><span class="n">F</span><span class="p">[</span><span class="err">å¤–éƒ¨è®¿é—®</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">A</span>

<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="n">ff9800</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">4</span><span class="n">caf50</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mf">2196f</span><span class="mi">3</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="n">f44336</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">9</span><span class="n">c27b0</span>
</code></pre></div>

<h4 id="docker-composeyml">docker-compose.yml ç¤ºä¾‹</h4>
<div class="codehilite"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Web æœåŠ¡</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8000:8000&quot;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DATABASE_URL=mysql://root:password@db:3306/myapp</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">REDIS_URL=redis://cache:6379</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cache</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./app:/app</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span>

<span class="w">  </span><span class="c1"># æ•°æ®åº“æœåŠ¡</span>
<span class="w">  </span><span class="nt">db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mysql:5.7</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">MYSQL_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">      </span><span class="nt">MYSQL_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapp</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db-data:/var/lib/mysql</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span>

<span class="w">  </span><span class="c1"># ç¼“å­˜æœåŠ¡</span>
<span class="w">  </span><span class="nt">cache</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis:7-alpine</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">db-data</span><span class="p">:</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">app-network</span><span class="p">:</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</code></pre></div>

<h4 id="docker-compose_1">Docker Compose å¸¸ç”¨å‘½ä»¤</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
docker<span class="w"> </span>compose<span class="w"> </span>up

<span class="c1"># åå°å¯åŠ¨</span>
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d

<span class="c1"># åœæ­¢æœåŠ¡</span>
docker<span class="w"> </span>compose<span class="w"> </span>stop

<span class="c1"># åœæ­¢å¹¶åˆ é™¤å®¹å™¨</span>
docker<span class="w"> </span>compose<span class="w"> </span>down

<span class="c1"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
docker<span class="w"> </span>compose<span class="w"> </span>ps

<span class="c1"># æŸ¥çœ‹æœåŠ¡æ—¥å¿—</span>
docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>-f

<span class="c1"># é‡å¯æœåŠ¡</span>
docker<span class="w"> </span>compose<span class="w"> </span>restart

<span class="c1"># æ„å»ºé•œåƒ</span>
docker<span class="w"> </span>compose<span class="w"> </span>build

<span class="c1"># è¿›å…¥æœåŠ¡å®¹å™¨</span>
docker<span class="w"> </span>compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>web<span class="w"> </span>bash
</code></pre></div>

<h2 id="_16">ğŸ¯ å¿«é€Ÿä¸Šæ‰‹å®æˆ˜</h2>
<h3 id="hello-world">è¿è¡Œç¬¬ä¸€ä¸ªå®¹å™¨ï¼šHello World</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># è¿è¡Œå®˜æ–¹çš„ hello-world é•œåƒ</span>
docker<span class="w"> </span>run<span class="w"> </span>hello-world

<span class="c1"># Docker ä¼šè‡ªåŠ¨ï¼š</span>
<span class="c1"># 1. æ£€æŸ¥æœ¬åœ°æ˜¯å¦æœ‰ hello-world é•œåƒ</span>
<span class="c1"># 2. å¦‚æœæ²¡æœ‰ï¼Œä»é…ç½®çš„é•œåƒæºä¸‹è½½</span>
<span class="c1"># 3. åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨</span>
<span class="c1"># 4. å®¹å™¨è¾“å‡ºæ¬¢è¿ä¿¡æ¯åè‡ªåŠ¨é€€å‡º</span>
</code></pre></div>

<h3 id="nginx-web">è¿è¡Œä¸€ä¸ª Nginx Web æœåŠ¡å™¨</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># è¿è¡Œ Nginx å®¹å™¨ï¼Œæ˜ å°„ç«¯å£åˆ°æœ¬åœ° 8080</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>my-nginx<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:80<span class="w"> </span>nginx

<span class="c1"># å‚æ•°è¯´æ˜ï¼š</span>
<span class="c1"># -d: åå°è¿è¡Œ</span>
<span class="c1"># --name: æŒ‡å®šå®¹å™¨åç§°</span>
<span class="c1"># -p 8080:80: å°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„ 8080 ç«¯å£</span>

<span class="c1"># è®¿é—® http://localhost:8080 æŸ¥çœ‹æ•ˆæœ</span>

<span class="c1"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
docker<span class="w"> </span>logs<span class="w"> </span>my-nginx

<span class="c1"># åœæ­¢å®¹å™¨</span>
docker<span class="w"> </span>stop<span class="w"> </span>my-nginx

<span class="c1"># åˆ é™¤å®¹å™¨</span>
docker<span class="w"> </span>rm<span class="w"> </span>my-nginx
</code></pre></div>

<h3 id="_17">å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨</h3>
<h4 id="_18">é•œåƒç®¡ç†</h4>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker pull</code></td>
<td>æ‹‰å–é•œåƒ</td>
<td><code>docker pull nginx:latest</code></td>
</tr>
<tr>
<td><code>docker images</code></td>
<td>åˆ—å‡ºé•œåƒ</td>
<td><code>docker images</code></td>
</tr>
<tr>
<td><code>docker rmi</code></td>
<td>åˆ é™¤é•œåƒ</td>
<td><code>docker rmi nginx:latest</code></td>
</tr>
<tr>
<td><code>docker build</code></td>
<td>æ„å»ºé•œåƒ</td>
<td><code>docker build -t myapp:v1 .</code></td>
</tr>
<tr>
<td><code>docker tag</code></td>
<td>æ ‡è®°é•œåƒ</td>
<td><code>docker tag myapp:v1 myapp:latest</code></td>
</tr>
<tr>
<td><code>docker search</code></td>
<td>æœç´¢é•œåƒ</td>
<td><code>docker search python</code></td>
</tr>
<tr>
<td><code>docker history</code></td>
<td>æŸ¥çœ‹é•œåƒå†å²</td>
<td><code>docker history nginx</code></td>
</tr>
</tbody>
</table>
<h4 id="_19">å®¹å™¨ç®¡ç†</h4>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker run</code></td>
<td>åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨</td>
<td><code>docker run -d -p 80:80 nginx</code></td>
</tr>
<tr>
<td><code>docker ps</code></td>
<td>åˆ—å‡ºè¿è¡Œä¸­çš„å®¹å™¨</td>
<td><code>docker ps</code></td>
</tr>
<tr>
<td><code>docker ps -a</code></td>
<td>åˆ—å‡ºæ‰€æœ‰å®¹å™¨</td>
<td><code>docker ps -a</code></td>
</tr>
<tr>
<td><code>docker start</code></td>
<td>å¯åŠ¨å®¹å™¨</td>
<td><code>docker start mynginx</code></td>
</tr>
<tr>
<td><code>docker stop</code></td>
<td>åœæ­¢å®¹å™¨</td>
<td><code>docker stop mynginx</code></td>
</tr>
<tr>
<td><code>docker restart</code></td>
<td>é‡å¯å®¹å™¨</td>
<td><code>docker restart mynginx</code></td>
</tr>
<tr>
<td><code>docker rm</code></td>
<td>åˆ é™¤å®¹å™¨</td>
<td><code>docker rm mynginx</code></td>
</tr>
<tr>
<td><code>docker exec</code></td>
<td>è¿›å…¥å®¹å™¨æ‰§è¡Œå‘½ä»¤</td>
<td><code>docker exec -it mynginx bash</code></td>
</tr>
<tr>
<td><code>docker logs</code></td>
<td>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</td>
<td><code>docker logs -f mynginx</code></td>
</tr>
<tr>
<td><code>docker inspect</code></td>
<td>æŸ¥çœ‹å®¹å™¨è¯¦æƒ…</td>
<td><code>docker inspect mynginx</code></td>
</tr>
</tbody>
</table>
<h4 id="_20">ç³»ç»Ÿç®¡ç†</h4>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker info</code></td>
<td>æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯</td>
<td><code>docker info</code></td>
</tr>
<tr>
<td><code>docker version</code></td>
<td>æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</td>
<td><code>docker version</code></td>
</tr>
<tr>
<td><code>docker stats</code></td>
<td>æ˜¾ç¤ºèµ„æºä½¿ç”¨æƒ…å†µ</td>
<td><code>docker stats</code></td>
</tr>
<tr>
<td><code>docker system df</code></td>
<td>æ˜¾ç¤ºç£ç›˜ä½¿ç”¨</td>
<td><code>docker system df</code></td>
</tr>
<tr>
<td><code>docker system prune</code></td>
<td>æ¸…ç†æœªä½¿ç”¨çš„èµ„æº</td>
<td><code>docker system prune -a</code></td>
</tr>
</tbody>
</table>
<h2 id="python">ğŸ’» å®æˆ˜æ¡ˆä¾‹ä¸€ï¼šPython åº”ç”¨å®¹å™¨åŒ–</h2>
<h3 id="flask">åˆ›å»ºç®€å•çš„ Flask åº”ç”¨</h3>
<p><strong>1. é¡¹ç›®ç»“æ„</strong></p>
<div class="codehilite"><pre><span></span><code>flask-demo/
â”œâ”€â”€ app.py
â”œâ”€â”€ requirements.txt
â””â”€â”€ Dockerfile
</code></pre></div>

<p><strong>2. app.py</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">home</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span>
        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello from Docker!&quot;</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;hostname&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;HOSTNAME&#39;</span><span class="p">,</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span>
    <span class="p">})</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/health&#39;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">health</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;healthy&quot;</span><span class="p">})</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PORT&#39;</span><span class="p">,</span> <span class="mi">5000</span><span class="p">))</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>
</code></pre></div>

<p><strong>3. requirements.txt</strong></p>
<div class="codehilite"><pre><span></span><code>flask==3.0.0
</code></pre></div>

<p><strong>4. Dockerfile</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c"># ä½¿ç”¨å®˜æ–¹ Python é•œåƒ</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.10-slim</span>

<span class="c"># è®¾ç½®å·¥ä½œç›®å½•</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>

<span class="c"># å¤åˆ¶ä¾èµ–æ–‡ä»¶</span>
<span class="k">COPY</span><span class="w"> </span>requirements.txt<span class="w"> </span>.

<span class="c"># å®‰è£…ä¾èµ–ï¼ˆä½¿ç”¨æ¸…åæºï¼‰</span>
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>-r<span class="w"> </span>requirements.txt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-i<span class="w"> </span>https://pypi.tuna.tsinghua.edu.cn/simple/

<span class="c"># å¤åˆ¶åº”ç”¨ä»£ç </span>
<span class="k">COPY</span><span class="w"> </span>app.py<span class="w"> </span>.

<span class="c"># è®¾ç½®ç¯å¢ƒå˜é‡</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">PORT</span><span class="o">=</span><span class="m">5000</span>

<span class="c"># æš´éœ²ç«¯å£</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">5000</span>

<span class="c"># å¯åŠ¨å‘½ä»¤</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;python&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app.py&quot;</span><span class="p">]</span>
</code></pre></div>

<p><strong>5. æ„å»ºå’Œè¿è¡Œ</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># æ„å»ºé•œåƒ</span>
docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>flask-demo:v1.0<span class="w"> </span>.

<span class="c1"># è¿è¡Œå®¹å™¨</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>--name<span class="w"> </span>flask-app<span class="w"> </span>-p<span class="w"> </span><span class="m">5000</span>:5000<span class="w"> </span>flask-demo:v1.0

<span class="c1"># æµ‹è¯•åº”ç”¨</span>
curl<span class="w"> </span>http://localhost:5000

<span class="c1"># æŸ¥çœ‹æ—¥å¿—</span>
docker<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>flask-app
</code></pre></div>

<h3 id="_21">åº”ç”¨å®¹å™¨åŒ–æµç¨‹</h3>
<div class="codehilite"><pre><span></span><code><span class="n">flowchart</span><span class="w"> </span><span class="n">TD</span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="err">ç¼–å†™åº”ç”¨ä»£ç </span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">app</span><span class="p">.</span><span class="n">py</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="err">åˆ›å»ºä¾èµ–æ–‡ä»¶</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">requirements</span><span class="p">.</span><span class="n">txt</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="err">ç¼–å†™</span><span class="w"> </span><span class="n">Dockerfile</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">D</span><span class="p">[</span><span class="err">æ„å»ºé•œåƒ</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">docker</span><span class="w"> </span><span class="kr">build</span><span class="p">]</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">E</span><span class="p">{</span><span class="err">æ„å»ºæˆåŠŸ</span><span class="o">?</span><span class="p">}</span>
<span class="w">    </span><span class="n">E</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">å¤±è´¥</span><span class="o">|</span><span class="w"> </span><span class="n">F</span><span class="p">[</span><span class="err">æ£€æŸ¥é”™è¯¯æ—¥å¿—</span><span class="p">]</span>
<span class="w">    </span><span class="n">F</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">C</span>
<span class="w">    </span><span class="n">E</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">æˆåŠŸ</span><span class="o">|</span><span class="w"> </span><span class="n">G</span><span class="p">[</span><span class="err">è¿è¡Œå®¹å™¨</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">docker</span><span class="w"> </span><span class="n">run</span><span class="p">]</span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">H</span><span class="p">[</span><span class="err">æµ‹è¯•åº”ç”¨</span><span class="p">]</span>
<span class="w">    </span><span class="n">H</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">I</span><span class="p">{</span><span class="err">è¿è¡Œæ­£å¸¸</span><span class="o">?</span><span class="p">}</span>
<span class="w">    </span><span class="n">I</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">å¦</span><span class="o">|</span><span class="w"> </span><span class="n">J</span><span class="p">[</span><span class="err">æŸ¥çœ‹æ—¥å¿—è°ƒè¯•</span><span class="p">]</span>
<span class="w">    </span><span class="n">J</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">G</span>
<span class="w">    </span><span class="n">I</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">æ˜¯</span><span class="o">|</span><span class="w"> </span><span class="n">K</span><span class="p">[</span><span class="err">åº”ç”¨æˆåŠŸå®¹å™¨åŒ–</span><span class="p">]</span>

<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="n">fff3e0</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">81</span><span class="n">d4fa</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">K</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">4</span><span class="n">caf50</span>
</code></pre></div>

<h2 id="uv-fastapi">ğŸš€ å®æˆ˜æ¡ˆä¾‹äºŒï¼šUV + FastAPI é¡¹ç›®å®¹å™¨åŒ–</h2>
<p>ç»“åˆæœ¬é¡¹ç›®çš„ UV Python åŒ…ç®¡ç†å™¨ï¼Œåˆ›å»ºä¸€ä¸ª FastAPI åº”ç”¨çš„å®Œæ•´å®¹å™¨åŒ–æ–¹æ¡ˆã€‚</p>
<h3 id="_22">é¡¹ç›®ç»“æ„</h3>
<div class="codehilite"><pre><span></span><code>fastapi-uv-demo/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ main.py
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ uv.lock
â”œâ”€â”€ Dockerfile
â””â”€â”€ docker-compose.yml
</code></pre></div>

<h3 id="_23">åº”ç”¨ä»£ç </h3>
<p><strong>app/main.py</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">fastapi</span><span class="w"> </span><span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;FastAPI with UV Demo&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Item</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">price</span><span class="p">:</span> <span class="nb">float</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">read_root</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;FastAPI + UV + Docker&quot;</span><span class="p">,</span>
        <span class="s2">&quot;environment&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ENV&quot;</span><span class="p">,</span> <span class="s2">&quot;development&quot;</span><span class="p">)</span>
    <span class="p">}</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/health&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">health_check</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;healthy&quot;</span><span class="p">}</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/items/&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_item</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="n">Item</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="n">item</span><span class="p">,</span> <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;created&quot;</span><span class="p">}</span>
</code></pre></div>

<h3 id="dockerfile-uv">Dockerfileï¼ˆä½¿ç”¨ UVï¼‰</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># å¤šé˜¶æ®µæ„å»º - ç¬¬ä¸€é˜¶æ®µï¼šå®‰è£…ä¾èµ–</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.10-slim</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">builder</span>

<span class="c"># å®‰è£… UVï¼ˆä½¿ç”¨æ¸…åæºåŠ é€Ÿï¼‰</span>
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--no-cache-dir<span class="w"> </span>uv<span class="w"> </span>-i<span class="w"> </span>https://pypi.tuna.tsinghua.edu.cn/simple/

<span class="c"># è®¾ç½®å·¥ä½œç›®å½•</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>

<span class="c"># å¤åˆ¶ä¾èµ–æ–‡ä»¶</span>
<span class="k">COPY</span><span class="w"> </span>pyproject.toml<span class="w"> </span>uv.lock<span class="w"> </span>./

<span class="c"># ä½¿ç”¨ UV å®‰è£…ä¾èµ–åˆ°è™šæ‹Ÿç¯å¢ƒ</span>
<span class="k">RUN</span><span class="w"> </span>uv<span class="w"> </span>sync<span class="w"> </span>--frozen

<span class="c"># å¤šé˜¶æ®µæ„å»º - ç¬¬äºŒé˜¶æ®µï¼šè¿è¡Œç¯å¢ƒ</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.10-slim</span>

<span class="c"># è®¾ç½®å·¥ä½œç›®å½•</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>

<span class="c"># ä»æ„å»ºé˜¶æ®µå¤åˆ¶è™šæ‹Ÿç¯å¢ƒ</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder<span class="w"> </span>/app/.venv<span class="w"> </span>/app/.venv

<span class="c"># å¤åˆ¶åº”ç”¨ä»£ç </span>
<span class="k">COPY</span><span class="w"> </span>app<span class="w"> </span>/app/app

<span class="c"># è®¾ç½®ç¯å¢ƒå˜é‡</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/app/.venv/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">PYTHONUNBUFFERED</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">ENV</span><span class="o">=</span>production

<span class="c"># æš´éœ²ç«¯å£</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">8000</span>

<span class="c"># å¯åŠ¨å‘½ä»¤</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;fastapi&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;run&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app/main.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--host&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--port&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;8000&quot;</span><span class="p">]</span>
</code></pre></div>

<h3 id="docker-compose_2">Docker Compose é…ç½®</h3>
<p><strong>docker-compose.yml</strong></p>
<div class="codehilite"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># FastAPI åº”ç”¨</span>
<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span>
<span class="w">      </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fastapi-uv-api</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8000:8000&quot;</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ENV=production</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DATABASE_URL=mysql://root:password@db:3306/fastapi_db</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./app:/app/app</span><span class="w">  </span><span class="c1"># å¼€å‘æ—¶çƒ­é‡è½½</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>

<span class="w">  </span><span class="c1"># MySQL æ•°æ®åº“</span>
<span class="w">  </span><span class="nt">db</span><span class="p">:</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mysql:5.7</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fastapi-mysql</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">MYSQL_ROOT_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">password</span>
<span class="w">      </span><span class="nt">MYSQL_DATABASE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fastapi_db</span>
<span class="w">      </span><span class="nt">MYSQL_USER</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fastapi_user</span>
<span class="w">      </span><span class="nt">MYSQL_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fastapi_pass</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;3306:3306&quot;</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mysql-data:/var/lib/mysql</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-network</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span>

<span class="nt">volumes</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mysql-data</span><span class="p">:</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>

<span class="nt">networks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">app-network</span><span class="p">:</span>
<span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bridge</span>
</code></pre></div>

<h3 id="fastapi-mysql">FastAPI + MySQL æ¶æ„å›¾</h3>
<div class="codehilite"><pre><span></span><code><span class="nf">graph</span><span class="w"> </span><span class="n">TB</span>
<span class="w">    </span><span class="n">subgraph</span><span class="w"> </span><span class="s">&quot;Docker Compose åº”ç”¨&quot;</span>
<span class="w">        </span><span class="n">A</span><span class="p">[</span><span class="err">å¤–éƒ¨è¯·æ±‚</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">HTTP</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="n">FastAPI</span><span class="w"> </span><span class="err">å®¹å™¨</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">api</span><span class="o">:</span><span class="mi">8000</span><span class="p">]</span>
<span class="w">        </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="n">MySQL</span><span class="w"> </span><span class="err">å®¹å™¨</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">db</span><span class="o">:</span><span class="mi">3306</span><span class="p">]</span>
<span class="w">        </span><span class="n">D</span><span class="p">[</span><span class="err">æ•°æ®å·</span><span class="o">&lt;</span><span class="n">br</span><span class="o">/&gt;</span><span class="n">mysql</span><span class="o">-</span><span class="n">data</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="p">.</span><span class="o">-&gt;|</span><span class="err">æŒä¹…åŒ–</span><span class="o">|</span><span class="w"> </span><span class="n">C</span>
<span class="w">    </span><span class="kd">end</span>

<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">E</span><span class="p">[</span><span class="err">åº”ç”¨æ—¥å¿—</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">F</span><span class="p">[</span><span class="err">æ•°æ®åº“æ—¥å¿—</span><span class="p">]</span>

<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="n">ff9800</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">4</span><span class="n">caf50</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mf">2196f</span><span class="mi">3</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">9</span><span class="n">c27b0</span>
</code></pre></div>

<h3 id="_24">è¿è¡Œæ­¥éª¤</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1. å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d

<span class="c1"># 2. æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
docker<span class="w"> </span>compose<span class="w"> </span>ps

<span class="c1"># 3. æŸ¥çœ‹æ—¥å¿—</span>
docker<span class="w"> </span>compose<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>api

<span class="c1"># 4. æµ‹è¯• API</span>
curl<span class="w"> </span>http://localhost:8000
curl<span class="w"> </span>http://localhost:8000/health
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:8000/items/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;name&quot;: &quot;æµ‹è¯•å•†å“&quot;, &quot;price&quot;: 99.99}&#39;</span>

<span class="c1"># 5. è¿›å…¥å®¹å™¨è°ƒè¯•</span>
docker<span class="w"> </span>compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>api<span class="w"> </span>bash

<span class="c1"># 6. åœæ­¢æœåŠ¡</span>
docker<span class="w"> </span>compose<span class="w"> </span>down

<span class="c1"># 7. åœæ­¢å¹¶åˆ é™¤æ•°æ®å·</span>
docker<span class="w"> </span>compose<span class="w"> </span>down<span class="w"> </span>-v
</code></pre></div>

<h2 id="docker-compose_3">ğŸ”§ Docker Compose è¯¦è§£</h2>
<h3 id="compose">Compose æœåŠ¡ä¾èµ–å…³ç³»</h3>
<div class="codehilite"><pre><span></span><code><span class="nf">graph</span><span class="w"> </span><span class="n">TD</span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="n">docker</span><span class="w"> </span><span class="n">compose</span><span class="w"> </span><span class="n">up</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="err">æ£€æŸ¥æœåŠ¡ä¾èµ–</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="err">å¯åŠ¨</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="err">å®¹å™¨</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">D</span><span class="p">[</span><span class="err">ç­‰å¾…</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="err">å°±ç»ª</span><span class="p">]</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">E</span><span class="p">[</span><span class="err">å¯åŠ¨</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="err">å®¹å™¨</span><span class="p">]</span>
<span class="w">    </span><span class="n">E</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">F</span><span class="p">[</span><span class="err">å¯åŠ¨</span><span class="w"> </span><span class="n">api</span><span class="w"> </span><span class="err">å®¹å™¨</span><span class="p">]</span>
<span class="w">    </span><span class="n">F</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">G</span><span class="p">[</span><span class="err">æ‰€æœ‰æœåŠ¡è¿è¡Œä¸­</span><span class="p">]</span>

<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="n">fff3e0</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">4</span><span class="n">caf50</span>
</code></pre></div>

<h3 id="_25">å¸¸ç”¨é…ç½®é€‰é¡¹</h3>
<div class="codehilite"><pre><span></span><code><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>

<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">web</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># æ„å»ºé…ç½®</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span>
<span class="w">      </span><span class="nt">context</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">      </span><span class="nt">dockerfile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Dockerfile</span>
<span class="w">      </span><span class="nt">args</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VERSION=1.0</span>

<span class="w">    </span><span class="c1"># é•œåƒåç§°</span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">myapp:latest</span>

<span class="w">    </span><span class="c1"># å®¹å™¨åç§°</span>
<span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web-app</span>

<span class="w">    </span><span class="c1"># ç«¯å£æ˜ å°„</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8000:8000&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;8443:443&quot;</span>

<span class="w">    </span><span class="c1"># ç¯å¢ƒå˜é‡</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DEBUG=false</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DATABASE_URL=postgres://user:pass@db/mydb</span>

<span class="w">    </span><span class="c1"># ç¯å¢ƒå˜é‡æ–‡ä»¶</span>
<span class="w">    </span><span class="nt">env_file</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.env</span>

<span class="w">    </span><span class="c1"># æ•°æ®å·æŒ‚è½½</span>
<span class="w">    </span><span class="nt">volumes</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./app:/app</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">static-data:/app/static</span>

<span class="w">    </span><span class="c1"># ç½‘ç»œé…ç½®</span>
<span class="w">    </span><span class="nt">networks</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">frontend</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backend</span>

<span class="w">    </span><span class="c1"># ä¾èµ–æœåŠ¡</span>
<span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cache</span>

<span class="w">    </span><span class="c1"># é‡å¯ç­–ç•¥</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">unless-stopped</span>

<span class="w">    </span><span class="c1"># å¥åº·æ£€æŸ¥</span>
<span class="w">    </span><span class="nt">healthcheck</span><span class="p">:</span>
<span class="w">      </span><span class="nt">test</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;CMD&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;curl&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-f&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;http://localhost:8000/health&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30s</span>
<span class="w">      </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10s</span>
<span class="w">      </span><span class="nt">retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>

<span class="w">    </span><span class="c1"># èµ„æºé™åˆ¶</span>
<span class="w">    </span><span class="nt">deploy</span><span class="p">:</span>
<span class="w">      </span><span class="nt">resources</span><span class="p">:</span>
<span class="w">        </span><span class="nt">limits</span><span class="p">:</span>
<span class="w">          </span><span class="nt">cpus</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0.5&#39;</span>
<span class="w">          </span><span class="nt">memory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">512M</span>
</code></pre></div>

<h2 id="_26">â“ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 id="_27">é—®é¢˜æ’æŸ¥å†³ç­–æ ‘</h3>
<div class="codehilite"><pre><span></span><code><span class="n">flowchart</span><span class="w"> </span><span class="n">TD</span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="err">é‡åˆ°é—®é¢˜</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">{</span><span class="err">é•œåƒæ‹‰å–å¤±è´¥</span><span class="o">?</span><span class="p">}</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">æ˜¯</span><span class="o">|</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="err">é…ç½®å›½å†…é•œåƒæº</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">å¦</span><span class="o">|</span><span class="w"> </span><span class="n">D</span><span class="p">{</span><span class="err">å®¹å™¨æ— æ³•å¯åŠ¨</span><span class="o">?</span><span class="p">}</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">æ˜¯</span><span class="o">|</span><span class="w"> </span><span class="n">E</span><span class="p">[</span><span class="err">æŸ¥çœ‹æ—¥å¿—</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">logs</span><span class="p">]</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">å¦</span><span class="o">|</span><span class="w"> </span><span class="n">F</span><span class="p">{</span><span class="err">ç«¯å£æ— æ³•è®¿é—®</span><span class="o">?</span><span class="p">}</span>
<span class="w">    </span><span class="n">F</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">æ˜¯</span><span class="o">|</span><span class="w"> </span><span class="n">G</span><span class="p">[</span><span class="err">æ£€æŸ¥ç«¯å£æ˜ å°„å’Œé˜²ç«å¢™</span><span class="p">]</span>
<span class="w">    </span><span class="n">F</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">å¦</span><span class="o">|</span><span class="w"> </span><span class="n">H</span><span class="p">{</span><span class="err">æƒé™é”™è¯¯</span><span class="o">?</span><span class="p">}</span>
<span class="w">    </span><span class="n">H</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">æ˜¯</span><span class="o">|</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="err">æ·»åŠ ç”¨æˆ·åˆ°</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="err">ç»„</span><span class="p">]</span>
<span class="w">    </span><span class="n">H</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">å¦</span><span class="o">|</span><span class="w"> </span><span class="n">J</span><span class="p">{</span><span class="err">ç£ç›˜ç©ºé—´ä¸è¶³</span><span class="o">?</span><span class="p">}</span>
<span class="w">    </span><span class="n">J</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">æ˜¯</span><span class="o">|</span><span class="w"> </span><span class="n">K</span><span class="p">[</span><span class="err">æ¸…ç†</span><span class="o">:</span><span class="w"> </span><span class="n">docker</span><span class="w"> </span><span class="n">system</span><span class="w"> </span><span class="n">prune</span><span class="p">]</span>
<span class="w">    </span><span class="n">J</span><span class="w"> </span><span class="o">--&gt;|</span><span class="err">å¦</span><span class="o">|</span><span class="w"> </span><span class="n">L</span><span class="p">[</span><span class="err">æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</span><span class="p">]</span>

<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">M</span><span class="p">[</span><span class="err">é—®é¢˜è§£å†³</span><span class="p">]</span>
<span class="w">    </span><span class="n">E</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">M</span>
<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">M</span>
<span class="w">    </span><span class="n">I</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">M</span>
<span class="w">    </span><span class="n">K</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">M</span>

<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="n">ff9800</span>
<span class="w">    </span><span class="n">style</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="n">fill</span><span class="o">:</span><span class="err">#</span><span class="mi">4</span><span class="n">caf50</span>
</code></pre></div>

<h3 id="1">1. é•œåƒæ‹‰å–å¤±è´¥</h3>
<p><strong>é—®é¢˜</strong>ï¼š<code>error pulling image: Get https://registry-1.docker.io/v2/: dial tcp: lookup registry-1.docker.io: no such host</code></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># é…ç½®å›½å†…é•œåƒæºï¼ˆå‚è€ƒå‰é¢ç« èŠ‚ï¼‰</span>
sudo<span class="w"> </span>vim<span class="w"> </span>/etc/docker/daemon.json

<span class="c1"># æ·»åŠ é•œåƒæºé…ç½®åé‡å¯</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker

<span class="c1"># éªŒè¯é…ç½®</span>
docker<span class="w"> </span>info<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-A<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="s2">&quot;Registry Mirrors&quot;</span>
</code></pre></div>

<h3 id="2_1">2. æƒé™é—®é¢˜</h3>
<p><strong>é—®é¢˜</strong>ï¼š<code>Got permission denied while trying to connect to the Docker daemon socket</code></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># å°†ç”¨æˆ·æ·»åŠ åˆ° docker ç»„</span>
sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>docker<span class="w"> </span><span class="nv">$USER</span>

<span class="c1"># é‡æ–°ç™»å½•æˆ–åˆ·æ–°ç»„æƒé™</span>
newgrp<span class="w"> </span>docker

<span class="c1"># éªŒè¯</span>
docker<span class="w"> </span>ps
</code></pre></div>

<h3 id="3">3. ç«¯å£å·²è¢«å ç”¨</h3>
<p><strong>é—®é¢˜</strong>ï¼š<code>Bind for 0.0.0.0:8080 failed: port is already allocated</code></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># æŸ¥çœ‹ç«¯å£å ç”¨</span>
sudo<span class="w"> </span>lsof<span class="w"> </span>-i<span class="w"> </span>:8080
sudo<span class="w"> </span>netstat<span class="w"> </span>-tulpn<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="m">8080</span>

<span class="c1"># åœæ­¢å ç”¨ç«¯å£çš„å®¹å™¨</span>
docker<span class="w"> </span>ps<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="m">8080</span>
docker<span class="w"> </span>stop<span class="w"> </span>&lt;container_id&gt;

<span class="c1"># æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£</span>
docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">8081</span>:80<span class="w"> </span>nginx
</code></pre></div>

<h3 id="4_1">4. å®¹å™¨æ— æ³•è¿æ¥ç½‘ç»œ</h3>
<p><strong>é—®é¢˜</strong>ï¼šå®¹å™¨å†…æ— æ³•è®¿é—®å¤–ç½‘</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># æ£€æŸ¥ Docker ç½‘ç»œ</span>
docker<span class="w"> </span>network<span class="w"> </span>ls
docker<span class="w"> </span>network<span class="w"> </span>inspect<span class="w"> </span>bridge

<span class="c1"># é‡å¯ Docker æœåŠ¡</span>
sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>docker

<span class="c1"># æ£€æŸ¥é˜²ç«å¢™è®¾ç½®</span>
sudo<span class="w"> </span>ufw<span class="w"> </span>status
</code></pre></div>

<h3 id="5">5. ç£ç›˜ç©ºé—´ä¸è¶³</h3>
<p><strong>é—®é¢˜</strong>ï¼š<code>no space left on device</code></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># æŸ¥çœ‹ç£ç›˜ä½¿ç”¨</span>
docker<span class="w"> </span>system<span class="w"> </span>df

<span class="c1"># æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ</span>
docker<span class="w"> </span>image<span class="w"> </span>prune<span class="w"> </span>-a

<span class="c1"># æ¸…ç†åœæ­¢çš„å®¹å™¨</span>
docker<span class="w"> </span>container<span class="w"> </span>prune

<span class="c1"># æ¸…ç†æœªä½¿ç”¨çš„æ•°æ®å·</span>
docker<span class="w"> </span>volume<span class="w"> </span>prune

<span class="c1"># å…¨é¢æ¸…ç†ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</span>
docker<span class="w"> </span>system<span class="w"> </span>prune<span class="w"> </span>-a<span class="w"> </span>--volumes
</code></pre></div>

<h3 id="6">6. å®¹å™¨å†…æ—¶åŒºé—®é¢˜</h3>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c"># åœ¨ Dockerfile ä¸­è®¾ç½®æ—¶åŒº</span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">TZ</span><span class="o">=</span>Asia/Shanghai
<span class="k">RUN</span><span class="w"> </span>ln<span class="w"> </span>-snf<span class="w"> </span>/usr/share/zoneinfo/<span class="nv">$TZ</span><span class="w"> </span>/etc/localtime<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$TZ</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/timezone
</code></pre></div>

<h3 id="7">7. ä¸­æ–‡ä¹±ç é—®é¢˜</h3>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c"># åœ¨ Dockerfile ä¸­è®¾ç½®ç¼–ç </span>
<span class="k">ENV</span><span class="w"> </span><span class="nv">LANG</span><span class="o">=</span>C.UTF-8<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">LC_ALL</span><span class="o">=</span>C.UTF-8
</code></pre></div>

<h2 id="_28">ğŸ“ æœ€ä½³å®è·µ</h2>
<h3 id="1-dockerfile">1. Dockerfile ä¼˜åŒ–æŠ€å·§</h3>
<h4 id="_29">âœ… ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºå‡å°é•œåƒä½“ç§¯</h4>
<div class="codehilite"><pre><span></span><code><span class="c"># æ„å»ºé˜¶æ®µ</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">node:18</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">builder</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>
<span class="k">COPY</span><span class="w"> </span>package*.json<span class="w"> </span>./
<span class="k">RUN</span><span class="w"> </span>npm<span class="w"> </span>install
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>.
<span class="k">RUN</span><span class="w"> </span>npm<span class="w"> </span>run<span class="w"> </span>build

<span class="c"># ç”Ÿäº§é˜¶æ®µ</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">nginx:alpine</span>
<span class="k">COPY</span><span class="w"> </span>--from<span class="o">=</span>builder<span class="w"> </span>/app/dist<span class="w"> </span>/usr/share/nginx/html
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">80</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nginx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-g&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;daemon off;&quot;</span><span class="p">]</span>
</code></pre></div>

<h4 id="run">âœ… åˆå¹¶ RUN æŒ‡ä»¤å‡å°‘å±‚æ•°</h4>
<div class="codehilite"><pre><span></span><code><span class="c"># âŒ ä¸å¥½ï¼šåˆ›å»ºå¤šå±‚</span>
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>curl
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>git

<span class="c"># âœ… å¥½ï¼šåˆå¹¶ä¸ºä¸€å±‚</span>
<span class="k">RUN</span><span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>curl<span class="w"> </span>git<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span>/var/lib/apt/lists/*
</code></pre></div>

<h4 id="_30">âœ… åˆ©ç”¨æ„å»ºç¼“å­˜</h4>
<div class="codehilite"><pre><span></span><code><span class="c"># å…ˆå¤åˆ¶ä¾èµ–æ–‡ä»¶ï¼Œå†å¤åˆ¶ä»£ç </span>
<span class="c"># è¿™æ ·ä»£ç æ”¹åŠ¨ä¸ä¼šå¯¼è‡´é‡æ–°å®‰è£…ä¾èµ–</span>
<span class="k">COPY</span><span class="w"> </span>requirements.txt<span class="w"> </span>.
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>.
</code></pre></div>

<h4 id="dockerignore">âœ… ä½¿ç”¨ .dockerignore</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># .dockerignore æ–‡ä»¶</span>
<span class="na">.git</span>
<span class="na">.gitignore</span>
<span class="nf">node_modules</span>
<span class="nf">__pycache__</span>
<span class="err">*</span><span class="na">.pyc</span>
<span class="na">.env</span>
<span class="na">.vscode</span>
<span class="nf">README.md</span>
</code></pre></div>

<h3 id="2_2">2. å®‰å…¨å»ºè®®</h3>
<div class="codehilite"><pre><span></span><code><span class="c"># âœ… ä½¿ç”¨é root ç”¨æˆ·è¿è¡Œ</span>
<span class="k">RUN</span><span class="w"> </span>useradd<span class="w"> </span>-m<span class="w"> </span>-u<span class="w"> </span><span class="m">1000</span><span class="w"> </span>appuser
<span class="k">USER</span><span class="w"> </span><span class="s">appuser</span>

<span class="c"># âœ… ä½¿ç”¨å®˜æ–¹é•œåƒ</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.10-slim</span>

<span class="c"># âœ… å›ºå®šç‰ˆæœ¬æ ‡ç­¾ï¼Œé¿å…ä½¿ç”¨ latest</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">nginx:1.25.3-alpine</span>

<span class="c"># âœ… æ‰«ææ¼æ´</span>
<span class="c"># docker scan myapp:latest</span>
</code></pre></div>

<h3 id="3_1">3. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ä½¿ç”¨å¥åº·æ£€æŸ¥</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>myapp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--health-cmd<span class="o">=</span><span class="s2">&quot;curl -f http://localhost:8000/health || exit 1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--health-interval<span class="o">=</span>30s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--health-timeout<span class="o">=</span>10s<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--health-retries<span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>myapp:latest

<span class="c1"># è®¾ç½®èµ„æºé™åˆ¶</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>myapp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--cpus<span class="o">=</span><span class="s2">&quot;0.5&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--memory<span class="o">=</span><span class="s2">&quot;512m&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>myapp:latest

<span class="c1"># è®¾ç½®é‡å¯ç­–ç•¥</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>myapp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--restart<span class="o">=</span>unless-stopped<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>myapp:latest
</code></pre></div>

<h3 id="4_2">4. æ—¥å¿—ç®¡ç†</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># é™åˆ¶æ—¥å¿—å¤§å°</span>
docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>myapp<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--log-driver<span class="o">=</span>json-file<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--log-opt<span class="w"> </span>max-size<span class="o">=</span>10m<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--log-opt<span class="w"> </span>max-file<span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>myapp:latest
</code></pre></div>

<h2 id="_31">ğŸ“– è¿›é˜¶èµ„æº</h2>
<h3 id="_32">å®˜æ–¹æ–‡æ¡£</h3>
<ul>
<li><a href="https://docs.docker.com/">Docker å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://hub.docker.com/">Docker Hub</a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/">Dockerfile å‚è€ƒ</a></li>
<li><a href="https://docs.docker.com/compose/">Docker Compose æ–‡æ¡£</a></li>
</ul>
<h3 id="_33">æ¨èæ•™ç¨‹</h3>
<ul>
<li><a href="https://yeasy.gitbook.io/docker_practice/">Docker ä»å…¥é—¨åˆ°å®è·µ</a></li>
<li><a href="https://www.docker.org.cn/">Docker ä¸­æ–‡ç¤¾åŒº</a></li>
</ul>
<h3 id="_34">é•œåƒä»“åº“</h3>
<ul>
<li><strong>Docker Hub</strong>ï¼šhttps://hub.docker.com/</li>
<li><strong>ç½‘æ˜“é•œåƒä¸­å¿ƒ</strong>ï¼šhttps://c.163yun.com/hub</li>
<li><strong>é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡</strong>ï¼šhttps://cr.console.aliyun.com/</li>
</ul>
<h3 id="_35">ç›¸å…³é¡¹ç›®</h3>
<ul>
<li><strong>æœ¬é¡¹ç›® UV æ•™ç¨‹</strong>ï¼š<a href="../uv/getting-started.md">UV å¿«é€Ÿå…¥é—¨</a></li>
<li><strong>FastAPI é¡¹ç›®ç¤ºä¾‹</strong>ï¼š<a href="../../../examples/fastapi-demo/">examples/fastapi-demo</a></li>
</ul>
<h2 id="_36">ğŸ‰ æ€»ç»“</h2>
<p>æ­å–œä½ å®Œæˆ Docker å¿«é€Ÿå…¥é—¨æ•™ç¨‹ï¼ç°åœ¨ä½ å·²ç»æŒæ¡ï¼š</p>
<p>âœ… Docker çš„æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„
âœ… åœ¨ Ubuntu 22.04 ä¸Šå®‰è£…å’Œé…ç½® Docker
âœ… é…ç½®å›½å†…é•œåƒæºåŠ é€Ÿé•œåƒæ‹‰å–
âœ… é•œåƒå’Œå®¹å™¨çš„ç®¡ç†
âœ… ç¼–å†™ Dockerfile æ„å»ºè‡ªå®šä¹‰é•œåƒ
âœ… ä½¿ç”¨ Docker Compose ç¼–æ’å¤šå®¹å™¨åº”ç”¨
âœ… Python/FastAPI åº”ç”¨çš„å®¹å™¨åŒ–å®æˆ˜
âœ… å¸¸è§é—®é¢˜çš„æ’æŸ¥å’Œè§£å†³
âœ… ç”Ÿäº§ç¯å¢ƒçš„æœ€ä½³å®è·µ</p>
<h3 id="_37">ä¸‹ä¸€æ­¥å»ºè®®</h3>
<ol>
<li><strong>å®è·µé¡¹ç›®</strong>ï¼šå°†è‡ªå·±çš„é¡¹ç›®å®¹å™¨åŒ–</li>
<li><strong>å­¦ä¹ ç¼–æ’</strong>ï¼šäº†è§£ Kubernetesï¼ˆK8sï¼‰</li>
<li><strong>CI/CD é›†æˆ</strong>ï¼šå°† Docker é›†æˆåˆ° CI/CD æµç¨‹</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå­¦ä¹ é•œåƒä¼˜åŒ–å’Œå®¹å™¨ç›‘æ§</li>
<li><strong>å®‰å…¨åŠ å›º</strong>ï¼šå­¦ä¹  Docker å®‰å…¨æœ€ä½³å®è·µ</li>
</ol>
<hr />
<blockquote>
<p>ğŸ’¡ <strong>æç¤º</strong>ï¼šDocker æ˜¯ä¸€é—¨å®è·µæ€§å¾ˆå¼ºçš„æŠ€æœ¯ï¼Œå»ºè®®å¤šåŠ¨æ‰‹æ“ä½œï¼Œé‡åˆ°é—®é¢˜æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºèµ„æºã€‚</p>
<p>ğŸ“ <strong>åé¦ˆ</strong>ï¼šå¦‚æœä½ å¯¹æœ¬æ•™ç¨‹æœ‰ä»»ä½•å»ºè®®æˆ–å‘ç°é”™è¯¯ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼</p>
</blockquote>

        

        <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #eee;">
            <h3>ğŸ”— ç›¸å…³é“¾æ¥</h3>
            <ul>
                <li><a href="/">è¿”å›é¦–é¡µ</a></li>
                <li><a href="https://docs.astral.sh/uv/" target="_blank">UV å®˜æ–¹æ–‡æ¡£</a></li>
                <li><a href="https://github.com/astral-sh/uv" target="_blank">UV GitHub ä»“åº“</a></li>
                <li><a href="https://pypi.tuna.tsinghua.edu.cn/" target="_blank">æ¸…åå¤§å­¦ PyPI é•œåƒ</a></li>
            </ul>
        </div>
    </div>
</article>

<style>
.copy-button:hover {
    background: #45a049 !important;
}
</style>

        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>å…³äºæ•™ç¨‹</h3>
                    <p>æœ¬æ•™ç¨‹ä¸“æ³¨äº UV Python åŒ…ç®¡ç†å™¨çš„å¿«é€Ÿå…¥é—¨å’Œå®æˆ˜åº”ç”¨ï¼Œç‰¹åˆ«é’ˆå¯¹å›½å†…ç”¨æˆ·è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
                </div>
                <div class="footer-section">
                    <h3>å¿«é€Ÿé“¾æ¥</h3>
                    <ul>
                        <li><a href="/tutorials/uv/getting-started.html">UV å¿«é€Ÿå…¥é—¨</a></li>
                        <li><a href="https://docs.astral.sh/uv/" target="_blank">å®˜æ–¹æ–‡æ¡£</a></li>
                        <li><a href="https://pypi.tuna.tsinghua.edu.cn/" target="_blank">æ¸…åé•œåƒæº</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>è”ç³»æ–¹å¼</h3>
                    <ul>
                        <li><a href="https://github.com/Devliang24/myblog" target="_blank">GitHub</a></li>
                    </ul>
                </div>
            </div>
            <hr style="border-color: rgba(255,255,255,0.2); margin: 2rem 0;">
            <p>&copy; 2025 UV Tutorial. ä½¿ç”¨ â¤ï¸ å’Œ UV æ„å»ºã€‚</p>
        </div>
    </footer>

    <script>
        // ç®€å•çš„äº¤äº’åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            // ä»£ç å¤åˆ¶åŠŸèƒ½
            const codeBlocks = document.querySelectorAll('pre code');
            codeBlocks.forEach(function(block) {
                const button = document.createElement('button');
                button.className = 'copy-button';
                button.textContent = 'å¤åˆ¶';
                button.style.position = 'absolute';
                button.style.top = '10px';
                button.style.right = '10px';
                button.style.background = '#4CAF50';
                button.style.color = 'white';
                button.style.border = 'none';
                button.style.padding = '5px 10px';
                button.style.borderRadius = '4px';
                button.style.cursor = 'pointer';
                button.style.fontSize = '12px';

                const pre = block.parentNode;
                pre.style.position = 'relative';
                pre.appendChild(button);

                button.addEventListener('click', function() {
                    navigator.clipboard.writeText(block.textContent).then(function() {
                        button.textContent = 'å·²å¤åˆ¶!';
                        setTimeout(function() {
                            button.textContent = 'å¤åˆ¶';
                        }, 2000);
                    });
                });
            });
        });
    </script>
</body>
</html>