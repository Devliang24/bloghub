# Pytest æ•™ç¨‹ - 04. å‚æ•°åŒ–æµ‹è¯•

> **é€‚åˆäººç¾¤**ï¼šå¼€å‘è€…
> **å‰ç½®çŸ¥è¯†**ï¼šè£…é¥°å™¨
> **é¢„è®¡æ—¶é—´**ï¼š15 åˆ†é’Ÿ

## ğŸ”¢ ä¸ºä»€ä¹ˆè¦å‚æ•°åŒ–ï¼Ÿ

å¦‚æœä½ è¦æµ‹è¯•ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œéœ€è¦éªŒè¯æ­£æ•°ã€è´Ÿæ•°ã€é›¶ç­‰å¤šç§æƒ…å†µã€‚ä¸å…¶å†™ä¸‰ä¸ª `def test_add_...` å‡½æ•°ï¼Œä¸å¦‚ä½¿ç”¨**å‚æ•°åŒ–**ã€‚

### å‚æ•°åŒ–å±•å¼€æµç¨‹

```mermaid
graph TD
    Def[å®šä¹‰ 1 ä¸ªæµ‹è¯•å‡½æ•°] -- @parametrize --> Case1[æµ‹è¯•ç”¨ä¾‹ 1: (1,2,3)]
    Def -- @parametrize --> Case2[æµ‹è¯•ç”¨ä¾‹ 2: (0,0,0)]
    Def -- @parametrize --> Case3[æµ‹è¯•ç”¨ä¾‹ 3: (-1,1,0)]
    
    style Def fill:#e1f5fe,stroke:#333
    style Case1 fill:#e8f5e9,stroke:#333
    style Case2 fill:#e8f5e9,stroke:#333
    style Case3 fill:#e8f5e9,stroke:#333
```

## ğŸ› ï¸ ä½¿ç”¨ @pytest.mark.parametrize

```python
import pytest

def add(x, y):
    return x + y

@pytest.mark.parametrize("x,y,expected", [
    (1, 2, 3),
    (0, 0, 0),
    (-1, 1, 0),
    (100, 200, 300),
])
def test_add(x, y, expected):
    assert add(x, y) == expected
```

è¿è¡Œ `pytest -v`ï¼Œä½ ä¼šçœ‹åˆ°å®ƒç”Ÿæˆäº† 4 ä¸ªç‹¬ç«‹çš„æµ‹è¯•ç”¨ä¾‹ï¼š

```
test_add[1-2-3] PASSED
test_add[0-0-0] PASSED
test_add[-1-1-0] PASSED
test_add[100-200-300] PASSED
```

## ğŸ—ï¸ ç»„åˆå‚æ•°åŒ–

ä½ å¯ä»¥å åŠ å¤šä¸ª `parametrize` è£…é¥°å™¨ï¼ŒPytest ä¼šè‡ªåŠ¨è®¡ç®—ç¬›å¡å°”ç§¯ï¼ˆæ‰€æœ‰ç»„åˆï¼‰ã€‚

```python
@pytest.mark.parametrize("x", [0, 1])
@pytest.mark.parametrize("y", [2, 3])
def test_foo(x, y):
    pass
```

è¿™å°†ç”Ÿæˆ 2 * 2 = 4 ä¸ªæµ‹è¯•ï¼š(0,2), (0,3), (1,2), (1,3)ã€‚

## ğŸ“š æ€»ç»“

*   ä½¿ç”¨ `@pytest.mark.parametrize` æ¶ˆé™¤é‡å¤ä»£ç ã€‚
*   æ”¯æŒå¤šå‚æ•°ã€å¤šç»„æ•°æ®ã€‚
*   æµ‹è¯•æŠ¥å‘Šæ¸…æ™°åŒºåˆ†æ¯ç»„æ•°æ®ã€‚

ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•**æ ‡è®°ä¸é…ç½®**æµ‹è¯•è¿è¡Œã€‚
